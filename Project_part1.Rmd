---
title: "Project Part 1" 
author: "CJ Onibala and Ray Santiago"
date: "2025-11-04"
fontsize: 12pt
geometry: margin=1in
urlcolor: black
output: pdf_document
header-includes:
- \usepackage{setspace}
- \onehalfspacing
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, highlight=FALSE)
```

```{r, echo=FALSE, warning=FALSE, message=FALSE}
## Use this chunk for reading in packages.
## Use this chunk for reading in the data, combining the data, and any other major data cleaning that is not relevant to show.
## Remove the ## before all code.
```

## Introduction
### Subsection headers, if using
UVA Football. The pride and joy of many students here, something that students look forward to each week after a rough week of classes, finals, and life tasks, especially when it’s a home game. The initial question we will explore is whether the team shows greater variability in points scored during home games compared to away games, which indicates whether the team performs consistently or shows more frequent fluctuations in scoring depending on where they play. This brings us to our next question of whether attendance influences the number of points scored by both teams, splitting each game into 4 groups based off attendance amount and comparing. This helps identify if fans cheering for the teams truly does hype up the players and allow for more points to be scored. Lastly, we want to explore the potential weakness of our team and see if our 3rd down conversion rate is lower than our opponent’s. This may help determine where our offense crumbles. 

Q1:Does UVA away games have more variablity vs home games
get scores from all games, then compare home vs away in one season
game_stats.txt
Q2: Does attendance influence average amount of points scored by both teams? 
game_stats.txt

Q3: Does UVA convert a lower proportion of 3rd downs than their opponents?

## Data Summary:
 (a) If the data represent a population, explain how the data were collected.
 (b) If the data represent a sample, explain how the data were selected and collected.
 (c) Explain any data modifications after collection and the reasons behind these changes.
 (d) Discuss potential issues with the data and their possible impact.
 (e) Explain why the data are appropriate to answer the research question.

## Exploratory Analysis:
(a) Include at least two numerical and two graphical summaries.
 (b) Display all of the chosen summaries in this section and within the 7-page report
 limit.
 (c) Appropriately label and title all elements of all graphical summaries.
 (d) Numerical summaries can be displayed graphically by displaying the numeric
 values on a corresponding graphic. Two summaries combined in this way are
 considered two of the four summaries.
 (e) Create all summaries in R and all graphical summaries using ggplot2.
  (f) Do NOT perform any statistical inference.
```{r}
library(ggplot2)
library(dplyr)
library(tidyr)
# Read files
game_stats <- read.csv("game_stats.txt", stringsAsFactors = FALSE)
third_downs <- read.csv("third_downs.txt", stringsAsFactors = FALSE)
third_downs_enemy <- read.csv("third_downs_enemy.txt", stringsAsFactors = FALSE)

# Convert dates
game_stats$Date <- as.Date(game_stats$Date, format = "%Y-%m-%d")
third_downs$Date <- as.Date(third_downs$Date, format = "%m/%d/%y")
third_downs_enemy$Date <- as.Date(third_downs_enemy$Date, format = "%m/%d/%y")  # fixed reference

# Select relevant columns and rename for clarity
third_downs_subset <- third_downs %>% select(Date, Opponent, Attempts, Conversions, ConversionPercent)
third_downs_enemy_subset <- third_downs_enemy %>% 
  select(Date, Opponent, EnemyAttempts = Attempts, EnemyConversions = Conversions, EnemyConversionPercent = ConversionPercent)

# Merge UVA and Opponent third downs first by Date and Opponent
conversion_compare <- merge(third_downs_subset, third_downs_enemy_subset, by = c("Date", "Opponent"))

# Optionally merge with game_stats if needed
full_data <- merge(game_stats, conversion_compare, by = c("Date", "Opponent"))


# View the merged dataframe
print(full_data)

# numerical summary:
iqr_summary <- full_data %>%
  group_by(Location) %>%
  summarise(IQR_UVA_Score = IQR(UVA_Score, na.rm=TRUE))

# Graphical summary 1: Boxplot of UVA_Score by Location with IQR values annotated
ggplot(full_data, aes(x=Location, y=UVA_Score)) +
  geom_boxplot() +
  geom_text(data = iqr_summary, aes(x=Location, y=max(full_data$UVA_Score, na.rm=TRUE), label = paste("IQR:", round(IQR_UVA_Score, 1))), inherit.aes=FALSE, vjust=-0.5) +
  labs(title = "Boxplot of UVA Scores by Game Location", x = "Game Location", y = "UVA Score")


# Graphical Summary 2

# Reshape the data to long format with scores stacked
long_data <- full_data %>%
  select(Date, Opponent, Attendance, UVA_Score, Opponent_Score) %>%
  pivot_longer(cols = c(UVA_Score, Opponent_Score),
               names_to = "Team",
               values_to = "Score")

# Create a new column for total score
full_data <- full_data %>%
  mutate(Total_Score = UVA_Score + Opponent_Score)

# Plot Attendance vs Total Score
ggplot(full_data, aes(x = Attendance, y = Total_Score)) +
  geom_point(color = "blue", size = 3) +
  geom_text(aes(label = Total_Score), nudge_y = 2, size = 3) +  # Add numbers above points
  labs(title = "Attendance vs Total Points Scored",
       x = "Attendance",
       y = "Total Points (UVA + Opponent)")


# Graphical summary 3: Dot plot of ConversionPercent by game (Date)
ggplot(full_data, aes(x=factor(Date), y=ConversionPercent)) +
  geom_point(color = "darkgreen", size=3) +
  labs(title = "3rd Down Conversion % Per Game", x = "Game Date", y = "Conversion Percent") +
  theme(axis.text.x = element_text(angle = 45, hjust=1))


```
## Conclusions: 
(a) Interpret the chosen summaries and make initial conclusions based on the infor
mation displayed in them.
 (b) Interpret the values, trends, and patterns displayed in the chosen summaries sta
tistically.
 (c) Explain what the values, trends, and patterns displayed in the chosen summaries
 may mean or imply in the context of the question.
 (d) Summarize the conclusions in the context of the topic of interest.
 \newpage.
## References:

uva football game stats:https://virginiasports.com/football-stats/
individual game stats:https://cfbstats.com/2024/team/746/thirddown/offense/gamelog.html
 (a) This section is not considered part of the 7-page report length limit.
 (b) Begin this section on a new page.
 (c) Include sources used for background research and the data sources.
 (d) If you used AI to produce any portion of any file in your repository, you must
 provide attribution in accordance with UVA guidelines
 
You should include a URL to your team's repository in your report. The URL for the data set that you include in the references section should not be the raw URL within your team's repo. Rather, this URL should be where you downloaded (or scraped) the data set from.

If you used Gen AI to produce any portion of any file in your team's repository, then you must provide attribution in accordance with UVA guidelines.



Linebreaks are created using two spaces at the end of the previous line of text, or using the command \newline.  
Pagebreaks are created using the command \newpage.  
Note: These commands execute when knitting, moving the end-of-sentence period in the resulting PDF.

```{r, echo=FALSE}
## R code to create and display summaries in part 1. 
## This R code will not be printed in the PDF.
## Remove the ## before all code.
```



```{r}
## R code to conduct the test in part 2.
## This R code will be printed in the PDF.
## Remove the ## before all code.
```

